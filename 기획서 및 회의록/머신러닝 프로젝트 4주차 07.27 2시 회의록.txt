참고 링크: https://todayisbetterthanyesterday.tistory.com/56

XGBoost의 feature importance와 SHAP(SHapley Additive exPlanations) 값은 원리가 다릅니다. 이 두 가지 방법은 모두 변수의 중요도를 측정하는 데 사용되지만, 접근 방식과 계산 원리가 서로 다릅니다. 이로 인해 두 방법이 다른 결과를 보여줄 수 있습니다.

XGBoost의 feature importance는 모델의 트리 구조에서 각 특성이 얼마나 자주 사용되었는지를 기준으로 변수의 중요도를 계산합니다. 트리 구조에서 특성이 분기에 사용된 빈도나 분기 시점에서의 불순도 감소량 등을 고려하여 계산합니다. XGBoost는 빠른 속도와 좋은 성능으로 유명하며, feature importance를 계산하기 쉽게 제공합니다.

반면에 SHAP 값은 셰이플리 값을 기반으로 합니다. SHAP 값은 모든 특성 조합의 경우를 고려하여 각 특성의 기여도를 계산합니다. SHAP 값은 각 특성이 어떻게 예측에 기여하는지를 측정하므로 보다 정확하고 전체적인 영향력을 반영합니다. 하지만 SHAP 값은 계산에 시간이 오래 걸릴 수 있으며, 다른 모델의 경우에도 적용 가능하기 때문에 더 일반적으로 사용됩니다.

이러한 차이로 인해 XGBoost의 feature importance와 SHAP 값이 서로 다른 결과를 보여주는 경우가 발생할 수 있습니다. 특히, 상호작용이 많거나 비선형성이 높은 경우에는 두 방법이 더욱 차이가 날 수 있습니다.

이런 경우에는 SHAP 값이 보다 더 신뢰할만한 변수 중요도를 제공하는 경우가 많습니다. SHAP 값은 모델의 예측에 직접적인 기여를 측정하고, 변수 사이의 상호작용을 고려하므로 모델의 예측을 더 잘 설명해줄 수 있습니다. 따라서 SHAP 값이 더 의미 있는 변수 중요도를 제공하는 경우, 해당 결과를 신뢰하여 모델을 해석하고 결과를 이해하는 데 활용할 수 있습니다.

만약 SHAP 값과 feature importance의 결과가 완전히 다른 경우에는 모델 구조를 확인하고 데이터를 검토하여 문제가 없는지 확인하는 것이 중요합니다. 예를 들어, 데이터 전처리 과정이나 변수 선택 과정에서 오류가 발생했을 수 있으며, 이러한 부분을 점검하여 해결해야 합니다. 또한, 데이터의 특성과 모델의 성격에 따라 feature importance와 SHAP 값이 어떻게 다를 수 있는지 고려해보는 것도 중요합니다. 데이터와 모델의 특성에 맞추어 적절한 방법을 선택하여 모델의 해석성을 높이는 데 도움이 될 것입니다.


---------------------------------------------------------------------------------------

shap value기준으로 보았을 때

trans_cnt, trans_amt 값이 높게 나옴

거래 횟수, 거래량이 적을 수록 이탈을 많이 한다는 것을 알 수 있습니다. 

저희가 보고자 했던 휴면계좌를 알 수 있는inactive month의 경우 중요도가 하위권에 있는걸 볼 수 있습니다.

이 데이터는 가상의 데이터라 실제상황에 적용하기엔 무리가 있다고 판단했습니다.(현실과는 다른 데이터)

따라서 이 가상데이터 기반으로 이탈에 영향을 가장 많이 영향을 미치는 변수는  trans_cnt, trans_amt라는 것을 알 수 있습니다.